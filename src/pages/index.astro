---
import Layout from "../layouts/Layout.astro";
import { Image } from "astro:assets";
import { getCollection } from "astro:content";

import portrait from "../assets/websiteprofilepic.png";

const stats = [
  { label: "Focus", value: "Cloud + Automation" },
  { label: "Stack", value: "AWS - Terraform - Python - Linux" },
  { label: "Mode", value: "Build -> Ship -> Document" },
];

// Pull projects from content collection
const projects = await getCollection("projects");

// Newest first (if date is provided)
projects.sort((a, b) => (b.data.date ?? "").localeCompare(a.data.date ?? ""));
---

<Layout title="Conner Lorenz">
  <header class="container" style="padding: 28px 0 0;">
    <nav
      style="
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
      "
    >
      <a href="/" class="pill">
        <span class="dot"></span>
        connerlorenz.com
      </a>

      <div
        style="
          display: flex;
          gap: 10px;
          flex-wrap: wrap;
          justify-content: flex-end;
        "
      >
        <a class="pill" href="#projects">Projects</a>
        <a class="pill" href="#about">About</a>
        <a class="pill" href="#contact">Contact</a>
      </div>
    </nav>
  </header>

  <main class="container" style="padding: 38px 0 64px;">
    <!-- HERO -->
    <section
      class="card hero"
      style="padding: 28px; position: relative; overflow: hidden;"
    >
      <div class="hero-grid">
        <!-- LEFT: copy -->
        <div
          style="
            display: flex;
            flex-direction: column;
            gap: 16px;
            max-width: 760px;
          "
        >
          <div class="pill">
            <span class="dot"></span>
            AWS - Terraform - Cloud Automation
          </div>

          <h1>Cloud Automation & Infrastructure</h1>

          <p style="font-size: 15px; margin-top: 6px;">Conner Lorenz</p>

          <p style="max-width: 680px;">
            I build and automate reliable cloud systems using AWS, Terraform,
            and event-driven services - focused on repeatability, clarity, and
            operations that scale.
          </p>

          <div
            style="display: flex; gap: 12px; flex-wrap: wrap; margin-top: 6px;"
          >
            <a class="btn primary" href="#projects">View projects</a>

            <a
              href="/Conner_Lorenz_Resume.pdf"
              class="pill"
              target="_blank"
              rel="noopener"
            >
              Resume
            </a>

            <a
              class="btn"
              href="https://github.com/clorenz-git"
              target="_blank"
              rel="noreferrer"
            >
              GitHub
            </a>

            <a
              class="btn"
              href="https://linkedin.com/in/conner-lorenz-737952321"
              target="_blank"
              rel="noreferrer"
            >
              LinkedIn
            </a>
          </div>

          <div
            style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px;"
          >
            {
              stats.map((s) => (
                <span class="pill">
                  {s.label}: {s.value}
                </span>
              ))
            }
          </div>
        </div>

        <!-- RIGHT: portrait -->
        <div class="hero-portrait">
          <Image
            src={portrait}
            alt="Portrait of Conner Lorenz"
            width={320}
            height={320}
            loading="lazy"
          />
        </div>
      </div>

      <div
        aria-hidden="true"
        style="
          pointer-events: none;
          position: absolute;
          right: -160px;
          top: -140px;
          width: 520px;
          height: 520px;
          border-radius: 80px;
          background:
            radial-gradient(circle at 30% 30%, rgba(96, 165, 250, 0.35), transparent 60%),
            radial-gradient(circle at 65% 70%, rgba(251, 146, 60, 0.22), transparent 60%);
          transform: rotate(18deg);
          filter: blur(2px);
          opacity: 0.9;
        "
      >
      </div>
    </section>

    <!-- PROJECTS -->
    <section id="projects" style="padding: 34px 0 8px;">
      <div class="card" style="padding: 22px;">
        <h2>Projects</h2>
        <p style="color: var(--muted); margin-top: 8px;">
          Real builds in AWS, Terraform, Python, and Linux — focused on
          repeatability, operations, and clean documentation.
        </p>

        <div style="display: grid; gap: 14px; margin-top: 14px;">
          {
            projects.map((p) => (
              <a
                class="card"
                href={`/projects/${p.slug}`}
                style="
                display: block;
                text-decoration: none;
                padding: 18px;
              "
              >
                <div style="display: flex; justify-content: space-between; gap: 12px; flex-wrap: wrap;">
                  <h3 style="margin: 0;">{p.data.title}</h3>
                  {p.data.date ? (
                    <span class="pill" style="opacity: 0.9;">
                      {p.data.date}
                    </span>
                  ) : null}
                </div>

                <p style="margin: 10px 0 0; color: var(--muted); line-height: 1.6;">
                  {p.data.summary}
                </p>

                {p.data.tags?.length ? (
                  <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 12px;">
                    {p.data.tags.slice(0, 8).map((t) => (
                      <span class="pill">{t}</span>
                    ))}
                  </div>
                ) : null}
              </a>
            ))
          }
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" style="padding: 34px 0 8px;">
      <div class="card" style="padding: 22px;">
        <h2>About</h2>
        <p>
          I like automation that's predictable: clear logs, safe defaults, and
          runbooks that make sense. I'm strongest where cloud + scripting +
          systems meet - AWS, Terraform, Python, and Linux.
        </p>

        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
          <span class="pill">AWS</span>
          <span class="pill">Terraform</span>
          <span class="pill">Python</span>
          <span class="pill">Linux</span>
          <span class="pill">Event-driven</span>
          <span class="pill">Docs + diagrams</span>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" style="padding: 34px 0 80px;">
      <div
        class="card"
        style="
          padding: 22px;
          display: flex;
          justify-content: space-between;
          gap: 16px;
          flex-wrap: wrap;
          align-items: center;
        "
      >
        <div>
          <h2>Contact</h2>
          <p style="margin: 8px 0 0;">
            If you want someone who can build it and document it, let's talk.
          </p>
        </div>

        <div style="display: flex; gap: 12px; flex-wrap: wrap;">
          <a
            class="btn primary"
            href="mailto:connerlorenztech@gmail.com?subject=Hello%20Conner&body=Hi%20Conner%2C%0A%0A"
          >
            Email me
          </a>

          <a
            class="btn"
            href="https://github.com/clorenz-git"
            target="_blank"
            rel="noreferrer"
          >
            GitHub
          </a>

          <a
            class="btn"
            href="https://linkedin.com/in/conner-lorenz-737952321"
            target="_blank"
            rel="noreferrer"
          >
            LinkedIn
          </a>
        </div>
      </div>
    </section>
  </main>

  <footer class="container" style="padding: 22px 0 40px; color: var(--muted);">
    <div
      style="display: flex; justify-content: space-between; gap: 12px; flex-wrap: wrap;"
    >
      <span>© {new Date().getFullYear()} Conner Lorenz</span>
      <span class="pill">Built with Astro - Deployed on AWS.</span>
    </div>
  </footer>
</Layout>
